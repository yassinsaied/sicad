{% extends 'admin/baseBack.html.twig' %}

{% block title %}
	{{'add.article'|trans}}
{% endblock %}


{% block content %}

	<div class="container">
		{% form_theme editArticleForm _self %}


		<div class="col-xl-10">
			<div class="card">
				<div class="card-header">
					<div class="row align-items-center">
						<div class="col-8">
							<h3 class="mb-0">
								{{'add.article'|trans}}
							</h3>
						</div>

					</div>
				</div>


				<div class="card-body">


					{{ form_start(editArticleForm, {'attr': {'novalidate': 'novalidate'}}) }}

					<div class="row">
						<div class="col-lg-12">
							<div class="form-group">
								{{ form_label(editArticleForm.category, 'label.article.category'|trans, {'label_attr': {'class': 'form-control-label'}}) }}
								{{ form_widget(editArticleForm.category , {'attr': {'class': 'form-control'}}) }}
							</div>
						</div>
					</div>

					<div class="form-group">

						{{ form_label(editArticleForm.dateNews, 'label.article.date'|trans, {'label_attr': {'class': 'form-control-label'}}) }}

						<div class="input-group">
							<div class="input-group-prepend">
								<span class="input-group-text">
									<i class="ni ni-calendar-grid-58"></i>
								</span>
							</div>
							{{ form_widget(editArticleForm.dateNews , {'attr': {'class': 'form-control datepicker'}}) }}
						</div>
					</div>


					<div class="nav-wrapper">
						<ul class="nav nav-pills nav-fill flex-column flex-md-row" id="tabs-icons-text" role="tablist">
							<li class="nav-item lifr">
								<a class="nav-link mb-sm-3 mb-md-0 active" id="tabsfr" data-toggle="tab" href="#tabfr" role="tab" aria-controls="tabs-icons-text-1" aria-selected="true">
									<i class="ni ni-align-left-2 mr-1 ml-1"></i>
									{{'label.article.fr'|trans}}</a>
							</li>
							<li class="nav-item li-en" data-error-msg="{{'tab.article.erroren'|trans}}">
								<a class="nav-link mb-sm-3 mb-md-0" id="tabsen" data-toggle="tab" href="#taben" role="tab" aria-controls="tabs-icons-text-2" aria-selected="false">
									<i class="ni ni-align-left-2 mr-1 ml-1"></i>
									{{'label.article.en'|trans}}</a>
							</li>
							<li class="nav-item li-ar" data-error-msg="{{'tab.article.errorar'|trans}}">
								<a class="nav-link mb-sm-3 mb-md-0" id="tabsar" data-toggle="tab" href="#tabar" role="tab" aria-controls="tabs-icons-text-3" aria-selected="false">
									<i class="fas fa-align-right mr-1 mr-1"></i>
									{{'label.article.fr'|trans}}</a>
							</li>
						</ul>
					</div>
					<div class="card shadow">
						<div class="card-body">

							<div class="tab-content" id="myTabContent">
								<div class="tab-pane fade show active" id="tabfr" role="tabpanel" aria-labelledby="tabfr">

									<div class="row">
										<div class="col-lg-12">
											<div class="form-group">
												{{ form_label(editArticleForm.titleFr, 'title.article.fr'|trans, {'label_attr': {'class': 'form-control-label'}}) }}
												{{ form_widget(editArticleForm.titleFr , {'attr': {'class': 'form-control'}}) }}
											</div>
										</div>
									</div>

									<div class="row">
										<div class="col-lg-12">
											<div class="form-group">
												{{ form_label(editArticleForm.contentFr, 'content.article.fr'|trans, {'label_attr': {'class': 'form-control-label'}}) }}
												{{ form_widget(editArticleForm.contentFr , {'attr': {'class': 'form-control'}}) }}
											</div>
										</div>
									</div>


								</div>
								<div class="tab-pane fade" id="taben" role="tabpanel" aria-labelledby="taben">

									<div class="row">
										<div class="col-lg-12">
											<div class="form-group">
												{{ form_label(editArticleForm.titleEn, 'title.article.en'|trans, {'label_attr': {'class': 'form-control-label'}}) }}
												{{ form_widget(editArticleForm.titleEn , {'attr': {'class': 'form-control'}}) }}
											</div>
										</div>
									</div>

									<div class="row">
										<div class="col-lg-12">
											<div class="form-group">
												{{ form_label(editArticleForm.contentEn, 'content.article.en'|trans, {'label_attr': {'class': 'form-control-label'}}) }}
												{{ form_widget(editArticleForm.contentEn , {'attr': {'class': 'form-control'}}) }}
											</div>
										</div>
									</div>

								</div>
								<div class="tab-pane fade" id="tabar" role="tabpanel" aria-labelledby="tabar">


									<div class="row">
										<div class="col-lg-12">
											<div class="form-group">
												{{ form_label(editArticleForm.titleAr, 'title.article.ar'|trans, {'label_attr': {'class': 'form-control-label'}}) }}
												{{ form_widget(editArticleForm.titleAr , {'attr': {'class': 'form-control'}}) }}
											</div>
										</div>
									</div>


									<div class="row">
										<div class="col-lg-12">
											<div class="form-group">
												{{ form_label(editArticleForm.contentAr, 'content.article.ar'|trans, {'label_attr': {'class': 'form-control-label'}}) }}
												{{ form_widget(editArticleForm.contentAr , {'attr': {'class': 'form-control'}}) }}
											</div>
										</div>
									</div>


								</div>
							</div>
						</div>
					</div>

					<div class="drop-zone-container mb-5">
						<div class="col-lg-12">
							<div class="form-group">


								<div class="has-error">
									{{ form_errors(editArticleForm.images) }}
								</div>
                      


								<div class="row drop-zone" id="images-article" data-prototype="{{form_row(editArticleForm.images.vars.prototype)|e }}">
									{% if editArticleForm.images.vars.value is not null %}
                                          {% set idarticleImage = 0 %}
												{% for image in editArticleForm.images.vars.value %}

												<div class="frame-image col-xl-4 col-lg-4 col-md-6 col-sm-12"> <div class="card card-stats"> <div class="card-body"> <img  src="{{asset('uploads/articles/'~ image.name) | imagine_filter('article_thumb_uploaded') }}"/><div class="d-flex justify-content-end"><a class="remove-image"  data-id-element="{{idarticleImage}}"><i class="fas fa-trash-alt"></i></a></div> </div></div></div>	
                                 {% set idarticleImage = idarticleImage + 1 %}
												{% endfor %}

										{% else %}
										  <p class="h5 msg-dropzone d-flex">Drag 'n' drop some files here, or click to select files
									           <i class="ml-2 mr-2  fas fa-upload"></i>
								         	</p>	

									{% endif %}

									
								</div>
							</div>
						</div>

						{{form_widget(editArticleForm.images)}}
					</div>


					<div class="row justify-content-center">

						{{ form_widget(editArticleForm.addArticle , {'label': 'submit.update.article'|trans}, {'attr': {'class': 'btn btn-primary my-4'}}) }}

					</div>

				  	<input type="hidden" value="0" id="counter-widget"/>

					{{ form_end(editArticleForm) }}
				</div>
			</div>
		</div>


	{% endblock %}


	{% block _article_images_entry_widget  %}
	
		{% if form.vars.value.name is defined  %}
			{{ form_widget(form.imagefile , {'value' : form.vars.value.name}) }}

		{% else %}

			{{ form_widget(form.imagefile) }}

		{% endif %}

	{% endblock %}


	{% block _article_images_entry_row %}
		<div class="col-lg-12 image-article-widget" id="block_{{id}}">
			<div class="form-group">
				{{ form_widget(form) }}
				{# {{ form_errors(form) }} #}
			</div>
		</div>
	{% endblock %}

	{% block javascripts %}

		<script src="{{asset('js/multIUploadArticel.js')}}"></script>

	{% endblock %}
